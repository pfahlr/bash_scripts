#!/bin/bash
pacman_update_executable="yay"
pacman_main_executable="pacman"
pager_of_choice="most"

runcmd () {
  echo "running command: $1"
  eval $1
}

returntomain () {
  read -erp "Return to Main Menu [Y/n]:" continueinp
  if [[ $continueinp != 'n' ]]; then
    mainmenu
    else 
      exit
  fi
}

uninstallorphans () {
  cmd="$pacman_main_executable -Qdtq | sudo $pacman_main_executable -Rns -"
  runcmd "$cmd"
  returntomain
}

deletecahe () {
  echo "deleting cache directory with size:"
  du -sh "$HOME/.cache"
  cmd="rm -rf $HOME/.cache"
  runcmd "$cmd"
  returntomain  
}

pacmanclean () {
  cmd="sudo $pacman_main_executable -Scc"
  runcmd "$cmd"
  returntomain
}

homdiruseage () {
  echo ""
  echo "getting home directory usage summary"
  timestamp="$(date +%s)"
  tempfilename="homedirusage__$timestamp"
  sudo du -sh $HOME/* | grep '[M,G]' > "/tmp/$tempfilename" 
  sudo du -sh $HOME/.* | grep '[M,G]' >> "/tmp/$tempfilename"
  $pager_of_choice /tmp/$tempfilename
  rm /tmp/$tempfilename
  returntomain
} 

listinstalledsizes () {
  ( echo "Package  Size" && expac "%n\t%m" -l'\n' -H M -Q $($pacman_main_executable -Qq)  | sort -rhk 2 ) | column -t | $pager_of_choice
  returntomain
}

systemupdate () {
  cmd="$pacman_update_executable -Syyu --answerdiff N --answerclean N --answeredit N --answerupgrade Y --sudoloop --needed --removemake --noconfirm"
  echo $cmd 
  $cmd
  returntomain
}

programtitle() {
progtitle="
---------------
‚ñõ‚ñõ‚ñå‚ñÄ‚ñå‚ñõ‚ñå ‚ñå‚ñÄ‚ñå‚ñõ‚ñò‚ñõ‚ñå
‚ñå‚ñå‚ñå‚ñà‚ñå‚ñå‚ñå ‚ñå‚ñà‚ñå‚ñå ‚ñô‚ñå
------ ‚ñô‚ñå
     ‚ñò  ‚ñó ------------
‚ñõ‚ñõ‚ñå‚ñÄ‚ñå‚ñå‚ñõ‚ñå‚ñú‚ñò‚ñà‚ñå‚ñõ‚ñå‚ñÄ‚ñå‚ñõ‚ñå‚ñõ‚ñò‚ñà‚ñå
‚ñå‚ñå‚ñå‚ñà‚ñå‚ñå‚ñå‚ñå‚ñê‚ññ‚ñô‚ññ‚ñå‚ñå‚ñà‚ñå‚ñå‚ñå‚ñô‚ññ‚ñô‚ññ
----------------------
"
echo -e "${progtitle}"
}

simulateearly80spc() {
sleep .1; echo -n "l"; sleep .1; echo -n "o"; sleep .2; echo -n "a"; sleep .1; echo -n "d"; sleep .2; echo -n "i"; sleep .2; echo -n "n"; sleep .1; echo -n "g";
sleep .2; echo -n "."; sleep .2; echo -n "."; sleep .2; echo -n "."; sleep .2; echo -n "."; sleep .5; echo " "; sleep .4; echo " "; sleep .4; echo " "; sleep .2; echo " ";
}

mainmenu () {
  menu="
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñì‚ñì ú∏õú∏†ú∏§ú∏ûú∏§ú∏úú∏õú∏§¬†¬†ú∏õú∏†ú∏§ú∏öú∏§ú∏õú∏§ú∏úú∏ú ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñà
‚ñà‚ñì‚ñí ú∏ºú∏ºú∏ºú∏æúπÑú∏ºú∏ºú∏º¬†¬†ú∏ºú∏ºú∏ºú∏æú∏•ú∏ºú∏ºú∏æúπÑ ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñì‚ñà
‚ñà‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë                                                                          ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë (1) Uninstall Orphaned Packages    (2) Run pacman/yay clean              ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë (3) Delete Cache                   (4) Summarize Home Directory Usage    ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë (5) Update System                  (6) List Installed Packages           ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë (Q) EXIT                                                                 ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë                                                                          ‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñì‚ñà
‚ñà‚ñì‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñì‚ñà
‚ñà‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
"
  echo -e "${menu}"
  read -n 1 -p "Input Selection:" mainmenuinput
  echo ""
  if [ "$mainmenuinput" = "1" ]; then
      uninstallorphans
    elif [ "$mainmenuinput" = "2" ]; then
      pacmanclean
    elif [ "$mainmenuinput" = "3" ]; then
      deletecahe
    elif [ "$mainmenuinput" = "4" ]; then
      homdiruseage
    elif [ "$mainmenuinput" = "5" ]; then
      systemupdate      
    elif [ "$mainmenuinput" = "6" ]; then
      listinstalledsizes
    elif [ "$mainmenuinput" = "Q" ]; then
      exit
    elif [ "$mainmenuinput" = "q" ]; then
      exit

  fi
  mainmenu
}

programtitle
simulateearly80spc
mainmenu
